<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archive - Emotle</title>
    <script src="header.js"></script>
    <link rel="icon" href="favicon-32x32.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <a href="index.html" style="text-decoration: none;"><h1>Emotle</h1></a>
        </div>
        
        <h2>Puzzle Archive</h2>
        <div style="text-align: center; margin-top: 20px;">
            <p style="color: #b0b0b0;">Explore and play from our collection of 200 emoji puzzles.</p>
            
            <div class="archive-grid" id="archiveGrid">
                <!-- Populated by JS -->
            </div>
            
            <p style="margin-top: 40px;"><a href="index.html">&larr; Back to the game</a></p>
        </div>
    </div>

    <script src="game-data.js"></script>
    <script>
        function getCurrentIndex() {
            const today = new Date();
            today.setUTCHours(0, 0, 0, 0);
            const diffTime = Math.abs(today.getTime() - EPOCH_START_DATE.getTime());
            const diffDays = Math.floor(diffTime / MS_PER_DAY); 
            return diffDays % emojiPhrases.length;
        }

        const currentIndex = getCurrentIndex();
        const grid = document.getElementById('archiveGrid');

        // Show past 7 days (including today) in chronological order
        for (let i = 8; i >= 0; i--) {
            // Calculate index with wrapping
            let targetIndex = (currentIndex - i) % emojiPhrases.length;
            if (targetIndex < 0) targetIndex += emojiPhrases.length;
            
            const p = emojiPhrases[targetIndex];
            const item = document.createElement('a');
            item.href = `index.html?mode=practice&seed=${targetIndex}`;
            item.className = 'archive-item';
            item.style.textDecoration = 'none';
            item.style.display = 'block';
            
            const label = i === 0 ? "Today's Emotle" : `Emotle #${targetIndex + 1}`;
            
            item.innerHTML = `
                <span class="archive-emoji">${p.emoji}</span>
                <span class="archive-date" style="color: #87CEEB;">${label}</span>
            `;
            grid.appendChild(item);
        }
    </script>

    <script src="footer.js"></script>
    <footer class="site-footer"></footer>
</body>
</html>
